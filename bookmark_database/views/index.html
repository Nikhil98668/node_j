<!-- index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
   
</head>
<body>
    <h2>Expense Tracker</h2>
    <form id="expenseForm">
        <label for="name">Name:</label>
        <input type="text" id="name" placeholder="Enter Expense Name">

        <label for="amount">Amount:</label>
        <input type="number" id="amount" placeholder="Enter Expense Amount">

        <button type="submit">Add Expense</button>
    </form>
    <div id="expenses">
        <h3>All Expenses</h3>
        <ul id="expenseList"></ul>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.4/axios.min.js"></script>
    <script>
            
document.addEventListener('DOMContentLoaded', () => {
    const expenseForm = document.getElementById('expenseForm');
    const expenseList = document.getElementById('expenseList');

    expenseForm.addEventListener('submit', addExpense);

    async function addExpense(event) {
        event.preventDefault();
        const name = document.getElementById('name').value;
        const amount = document.getElementById('amount').value;

        try {
            const response = await axios.post('/api/expenses', { name, amount });
            console.log('POST Request Successful:', response.data);
            displayExpenses();
        } catch (error) {
            console.error('POST Request Failed:', error);
        }
    }

    async function displayExpenses() {
        try {
            const response = await axios.get('/api/expenses');
            const expenses = response.data;
            expenseList.innerHTML = '';
            expenses.forEach(expense => {
                const listItem = document.createElement('li');
                listItem.textContent = `Name: ${expense.name}  & Rs:${expense.amount}`;

                const deleteButton = document.createElement('button');
                deleteButton.textContent = 'Delete';
                deleteButton.onclick = () => deleteExpense(expense.id);

                listItem.appendChild(deleteButton);
                expenseList.appendChild(listItem);
            });
        } catch (error) {
            console.error('GET Request Failed:', error);
        }
    }

    async function deleteExpense(expenseId) {
        try {
            const response = await axios.delete(`/api/expenses/${expenseId}`);
            console.log('DELETE Request Successful:', response.data);
            displayExpenses();
        } catch (error) {
            console.error('DELETE Request Failed:', error);
        }
    }

    displayExpenses();
});

    </script>
</body>
</html>
