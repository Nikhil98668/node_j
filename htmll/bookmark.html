<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bookmark A Website</title>
    
</head>
<body>
    <h2>Bookmark A Website</h2>
    <form >
    <label for="name">Name:</label>
    <input type="text" id="name" placeholder="Enter Website Name">

    <label for="url">Website URL:</label>
    <input type="url" id="url">

   

    <button onclick="storeURL(event)">Submit</button>
        </form>
    <div id="appointments">
        <h3>All</h3>
        <ul id="appointmentList"></ul>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.6.7/axios.min.js"></script>
    <script>
        function storeURL(event) {
            event.preventDefault();
            const name = document.getElementById('name').value;
            const url = document.getElementById('url').value;
            if (!name || !url ) {
                alert('Please fill in all fields');
                return;
            }
            const url1 = {
                name: name,
                url: url
            };
            axios.post('  https://crudcrud.com/api/52b399721e5d4fa1b6968ee150225822/bookm ', url1)
                .then(response => {
                    console.log('POST Request Successful:', response.data);
                    displayURL();
                })
                .catch(error => {
                    console.error('POST Request Failed:', error);
                });
        }

        function displayURL() {
            const appointmentList = document.getElementById('appointmentList');
            appointmentList.innerHTML = '';
            axios.get('  https://crudcrud.com/api/52b399721e5d4fa1b6968ee150225822/bookm ')
                .then(response => {
                    const appointments = response.data;
                    appointments.forEach((appointment, index) => {
                        const listItem = document.createElement('li');
                        listItem.textContent = `Name : ${appointment.name} , URL : ${appointment.url} `;
                        const deleteButton = document.createElement('button');
                        deleteButton.textContent = 'Delete';
                        deleteButton.onclick = () => deleteeURL(appointment._id);
                        listItem.appendChild(deleteButton);
                        const editButton = document.createElement('button');
                        editButton.textContent = 'Edit';
                        editButton.onclick = () => editURL(appointment);
                        listItem.appendChild(editButton);
                        appointmentList.appendChild(listItem);
                        //listItem.appendChild(appointmentList);
                    });
                })
                .catch(error => {
                    console.error('GET Request Failed:', error);
                });
        }

        function deleteeURL(appointmentId) {
            axios.delete(`  https://crudcrud.com/api/52b399721e5d4fa1b6968ee150225822/bookm/${appointmentId}`)
                .then(response => {
                    console.log('DELETE Request Successful:', response.data);
                    displayURL();
                })
                .catch(error => {
                    console.error('DELETE Request Failed:', error);
                });
        }
        function editURL(appointment) {
            document.getElementById("name").value = appointment.name;
            document.getElementById("url").value = appointment.url;
            const editingAppointmentId1 = appointment._id;
            //deleteeURL(editingAppointmentId1);
            axios.delete(`  https://crudcrud.com/api/52b399721e5d4fa1b6968ee150225822/bookm/${editingAppointmentId1}`)
                .then(response => {
                    //deleteeURL(editingAppointmentId);
                    console.log('PUT Request Successful:', response.data);
                    displayURL();
                })
                .catch(error => {
                    console.error('PUT Request Failed:', error);
                });
        }

        displayURL();
    </script>
</body>
</html>
